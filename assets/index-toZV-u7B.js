(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))f(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const S of h.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&f(S)}).observe(document,{childList:!0,subtree:!0});function t(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function f(d){if(d.ep)return;d.ep=!0;const h=t(d);fetch(d.href,h)}})();const se=(e,n)=>n.some(t=>e instanceof t);let me,pe;function Ae(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Se(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ue=new WeakMap,oe=new WeakMap,Y=new WeakMap;function Te(e){const n=new Promise((t,f)=>{const d=()=>{e.removeEventListener("success",h),e.removeEventListener("error",S)},h=()=>{t(J(e.result)),d()},S=()=>{f(e.error),d()};e.addEventListener("success",h),e.addEventListener("error",S)});return Y.set(n,e),n}function Be(e){if(ue.has(e))return;const n=new Promise((t,f)=>{const d=()=>{e.removeEventListener("complete",h),e.removeEventListener("error",S),e.removeEventListener("abort",S)},h=()=>{t(),d()},S=()=>{f(e.error||new DOMException("AbortError","AbortError")),d()};e.addEventListener("complete",h),e.addEventListener("error",S),e.addEventListener("abort",S)});ue.set(e,n)}let le={get(e,n,t){if(e instanceof IDBTransaction){if(n==="done")return ue.get(e);if(n==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return J(e[n])},set(e,n,t){return e[n]=t,!0},has(e,n){return e instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in e}};function Ee(e){le=e(le)}function Le(e){return Se().includes(e)?function(...n){return e.apply(fe(this),n),J(this.request)}:function(...n){return J(e.apply(fe(this),n))}}function Ie(e){return typeof e=="function"?Le(e):(e instanceof IDBTransaction&&Be(e),se(e,Ae())?new Proxy(e,le):e)}function J(e){if(e instanceof IDBRequest)return Te(e);if(oe.has(e))return oe.get(e);const n=Ie(e);return n!==e&&(oe.set(e,n),Y.set(n,e)),n}const fe=e=>Y.get(e);function De(e,n,{blocked:t,upgrade:f,blocking:d,terminated:h}={}){const S=indexedDB.open(e,n),T=J(S);return f&&S.addEventListener("upgradeneeded",a=>{f(J(S.result),a.oldVersion,a.newVersion,J(S.transaction),a)}),t&&S.addEventListener("blocked",a=>t(a.oldVersion,a.newVersion,a)),T.then(a=>{h&&a.addEventListener("close",()=>h()),d&&a.addEventListener("versionchange",c=>d(c.oldVersion,c.newVersion,c))}).catch(()=>{}),T}const Ce=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],ie=new Map;function ge(e,n){if(!(e instanceof IDBDatabase&&!(n in e)&&typeof n=="string"))return;if(ie.get(n))return ie.get(n);const t=n.replace(/FromIndex$/,""),f=n!==t,d=Me.includes(t);if(!(t in(f?IDBIndex:IDBObjectStore).prototype)||!(d||Ce.includes(t)))return;const h=async function(S,...T){const a=this.transaction(S,d?"readwrite":"readonly");let c=a.store;return f&&(c=c.index(T.shift())),(await Promise.all([c[t](...T),d&&a.done]))[0]};return ie.set(n,h),h}Ee(e=>({...e,get:(n,t,f)=>ge(n,t)||e.get(n,t,f),has:(n,t)=>!!ge(n,t)||e.has(n,t)}));const Oe=["continue","continuePrimaryKey","advance"],ye={},de=new WeakMap,xe=new WeakMap,Ue={get(e,n){if(!Oe.includes(n))return e[n];let t=ye[n];return t||(t=ye[n]=function(...f){de.set(this,xe.get(this)[n](...f))}),t}};async function*je(...e){let n=this;if(n instanceof IDBCursor||(n=await n.openCursor(...e)),!n)return;n=n;const t=new Proxy(n,Ue);for(xe.set(t,n),Y.set(t,fe(n));n;)yield t,n=await(de.get(t)||n.continue()),de.delete(t)}function ve(e,n){return n===Symbol.asyncIterator&&se(e,[IDBIndex,IDBObjectStore,IDBCursor])||n==="iterate"&&se(e,[IDBIndex,IDBObjectStore])}Ee(e=>({...e,get(n,t,f){return ve(n,t)?je:e.get(n,t,f)},has(n,t){return ve(n,t)||e.has(n,t)}}));function Re(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ae={exports:{}},we;function ke(){return we||(we=1,function(e){(function(n){var t=I(),f=E(),d=A(),h=i(),S={imagePlaceholder:void 0,cacheBust:!1},T={toSvg:a,toPng:g,toJpeg:u,toBlob:l,toPixelData:c,impl:{fontFaces:d,images:h,util:t,inliner:f,options:{}}};e.exports=T;function a(o,r){return r=r||{},D(r),Promise.resolve(o).then(function(y){return U(y,r.filter,!0)}).then(W).then(L).then(m).then(function(y){return C(y,r.width||t.width(o),r.height||t.height(o))});function m(y){return r.bgcolor&&(y.style.backgroundColor=r.bgcolor),r.width&&(y.style.width=r.width+"px"),r.height&&(y.style.height=r.height+"px"),r.style&&Object.keys(r.style).forEach(function(x){y.style[x]=r.style[x]}),y}}function c(o,r){return O(o,r||{}).then(function(m){return m.getContext("2d").getImageData(0,0,t.width(o),t.height(o)).data})}function g(o,r){return O(o,r||{}).then(function(m){return m.toDataURL()})}function u(o,r){return r=r||{},O(o,r).then(function(m){return m.toDataURL("image/jpeg",r.quality||1)})}function l(o,r){return O(o,r||{}).then(t.canvasToBlob)}function D(o){typeof o.imagePlaceholder>"u"?T.impl.options.imagePlaceholder=S.imagePlaceholder:T.impl.options.imagePlaceholder=o.imagePlaceholder,typeof o.cacheBust>"u"?T.impl.options.cacheBust=S.cacheBust:T.impl.options.cacheBust=o.cacheBust}function O(o,r){return a(o,r).then(t.makeImage).then(t.delay(100)).then(function(y){var x=m(o);return x.getContext("2d").drawImage(y,0,0),x});function m(y){var x=document.createElement("canvas");if(x.width=r.width||t.width(y),x.height=r.height||t.height(y),r.bgcolor){var b=x.getContext("2d");b.fillStyle=r.bgcolor,b.fillRect(0,0,x.width,x.height)}return x}}function U(o,r,m){if(!m&&r&&!r(o))return Promise.resolve();return Promise.resolve(o).then(y).then(function(p){return x(o,p,r)}).then(function(p){return b(o,p)});function y(p){return p instanceof HTMLCanvasElement?t.makeImage(p.toDataURL()):p.cloneNode(!1)}function x(p,v,k){var H=p.childNodes;if(H.length===0)return Promise.resolve(v);return M(v,t.asArray(H),k).then(function(){return v});function M(K,q,j){var F=Promise.resolve();return q.forEach(function(G){F=F.then(function(){return U(G,j)}).then(function(N){N&&K.appendChild(N)})}),F}}function b(p,v){if(!(v instanceof Element))return v;return Promise.resolve().then(k).then(H).then(M).then(K).then(function(){return v});function k(){q(window.getComputedStyle(p),v.style);function q(j,F){j.cssText?F.cssText=j.cssText:G(j,F);function G(N,V){t.asArray(N).forEach(function(s){V.setProperty(s,N.getPropertyValue(s),N.getPropertyPriority(s))})}}}function H(){[":before",":after"].forEach(function(j){q(j)});function q(j){var F=window.getComputedStyle(p,j),G=F.getPropertyValue("content");if(G===""||G==="none")return;var N=t.uid();v.className=v.className+" "+N;var V=document.createElement("style");V.appendChild(s(N,j,F)),v.appendChild(V);function s(w,B,P){var R="."+w+":"+B,z=P.cssText?ne(P):re(P);return document.createTextNode(R+"{"+z+"}");function ne(X){var $=X.getPropertyValue("content");return X.cssText+" content: "+$+";"}function re(X){return t.asArray(X).map($).join("; ")+";";function $(Q){return Q+": "+X.getPropertyValue(Q)+(X.getPropertyPriority(Q)?" !important":"")}}}}}function M(){p instanceof HTMLTextAreaElement&&(v.innerHTML=p.value),p instanceof HTMLInputElement&&v.setAttribute("value",p.value)}function K(){v instanceof SVGElement&&(v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v instanceof SVGRectElement&&["width","height"].forEach(function(q){var j=v.getAttribute(q);j&&v.style.setProperty(q,j)}))}}}function W(o){return d.resolveAll().then(function(r){var m=document.createElement("style");return o.appendChild(m),m.appendChild(document.createTextNode(r)),o})}function L(o){return h.inlineAll(o).then(function(){return o})}function C(o,r,m){return Promise.resolve(o).then(function(y){return y.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(y)}).then(t.escapeXhtml).then(function(y){return'<foreignObject x="0" y="0" width="100%" height="100%">'+y+"</foreignObject>"}).then(function(y){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+r+'" height="'+m+'">'+y+"</svg>"}).then(function(y){return"data:image/svg+xml;charset=utf-8,"+y})}function I(){return{escape:K,parseExtension:r,mimeType:m,dataAsUrl:M,isDataUrl:y,canvasToBlob:b,resolveUrl:p,getAndEncode:H,uid:v(),delay:q,asArray:j,escapeXhtml:F,makeImage:k,width:G,height:N};function o(){var s="application/font-woff",w="image/jpeg";return{woff:s,woff2:s,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:w,jpeg:w,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function r(s){var w=/\.([^\.\/]*?)$/g.exec(s);return w?w[1]:""}function m(s){var w=r(s).toLowerCase();return o()[w]||""}function y(s){return s.search(/^(data:)/)!==-1}function x(s){return new Promise(function(w){for(var B=window.atob(s.toDataURL().split(",")[1]),P=B.length,R=new Uint8Array(P),z=0;z<P;z++)R[z]=B.charCodeAt(z);w(new Blob([R],{type:"image/png"}))})}function b(s){return s.toBlob?new Promise(function(w){s.toBlob(w)}):x(s)}function p(s,w){var B=document.implementation.createHTMLDocument(),P=B.createElement("base");B.head.appendChild(P);var R=B.createElement("a");return B.body.appendChild(R),P.href=w,R.href=s,R.href}function v(){var s=0;return function(){return"u"+w()+s++;function w(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function k(s){return new Promise(function(w,B){var P=new Image;P.onload=function(){w(P)},P.onerror=B,P.src=s})}function H(s){var w=3e4;return T.impl.options.cacheBust&&(s+=(/\?/.test(s)?"&":"?")+new Date().getTime()),new Promise(function(B){var P=new XMLHttpRequest;P.onreadystatechange=ne,P.ontimeout=re,P.responseType="blob",P.timeout=w,P.open("GET",s,!0),P.send();var R;if(T.impl.options.imagePlaceholder){var z=T.impl.options.imagePlaceholder.split(/,/);z&&z[1]&&(R=z[1])}function ne(){if(P.readyState===4){if(P.status!==200){R?B(R):X("cannot fetch resource: "+s+", status: "+P.status);return}var $=new FileReader;$.onloadend=function(){var Q=$.result.split(/,/)[1];B(Q)},$.readAsDataURL(P.response)}}function re(){R?B(R):X("timeout of "+w+"ms occured while fetching resource: "+s)}function X($){console.error($),B("")}})}function M(s,w){return"data:"+w+";base64,"+s}function K(s){return s.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function q(s){return function(w){return new Promise(function(B){setTimeout(function(){B(w)},s)})}}function j(s){for(var w=[],B=s.length,P=0;P<B;P++)w.push(s[P]);return w}function F(s){return s.replace(/#/g,"%23").replace(/\n/g,"%0A")}function G(s){var w=V(s,"border-left-width"),B=V(s,"border-right-width");return s.scrollWidth+w+B}function N(s){var w=V(s,"border-top-width"),B=V(s,"border-bottom-width");return s.scrollHeight+w+B}function V(s,w){var B=window.getComputedStyle(s).getPropertyValue(w);return parseFloat(B.replace("px",""))}}function E(){var o=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:x,shouldProcess:r,impl:{readUrls:m,inline:y}};function r(b){return b.search(o)!==-1}function m(b){for(var p=[],v;(v=o.exec(b))!==null;)p.push(v[1]);return p.filter(function(k){return!t.isDataUrl(k)})}function y(b,p,v,k){return Promise.resolve(p).then(function(M){return v?t.resolveUrl(M,v):M}).then(k||t.getAndEncode).then(function(M){return t.dataAsUrl(M,t.mimeType(p))}).then(function(M){return b.replace(H(p),"$1"+M+"$3")});function H(M){return new RegExp(`(url\\(['"]?)(`+t.escape(M)+`)(['"]?\\))`,"g")}}function x(b,p,v){if(k())return Promise.resolve(b);return Promise.resolve(b).then(m).then(function(H){var M=Promise.resolve(b);return H.forEach(function(K){M=M.then(function(q){return y(q,K,p,v)})}),M});function k(){return!r(b)}}}function A(){return{resolveAll:o,impl:{readAll:r}};function o(){return r().then(function(m){return Promise.all(m.map(function(y){return y.resolve()}))}).then(function(m){return m.join(`
`)})}function r(){return Promise.resolve(t.asArray(document.styleSheets)).then(y).then(m).then(function(b){return b.map(x)});function m(b){return b.filter(function(p){return p.type===CSSRule.FONT_FACE_RULE}).filter(function(p){return f.shouldProcess(p.style.getPropertyValue("src"))})}function y(b){var p=[];return b.forEach(function(v){try{t.asArray(v.cssRules||[]).forEach(p.push.bind(p))}catch(k){console.log("Error while reading CSS rules from "+v.href,k.toString())}}),p}function x(b){return{resolve:function(){var v=(b.parentStyleSheet||{}).href;return f.inlineAll(b.cssText,v)},src:function(){return b.style.getPropertyValue("src")}}}}}function i(){return{inlineAll:r,impl:{newImage:o}};function o(m){return{inline:y};function y(x){return t.isDataUrl(m.src)?Promise.resolve():Promise.resolve(m.src).then(x||t.getAndEncode).then(function(b){return t.dataAsUrl(b,t.mimeType(m.src))}).then(function(b){return new Promise(function(p,v){m.onload=p,m.onerror=v,m.src=b})})}}function r(m){if(!(m instanceof Element))return Promise.resolve(m);return y(m).then(function(){return m instanceof HTMLImageElement?o(m).inline():Promise.all(t.asArray(m.childNodes).map(function(x){return r(x)}))});function y(x){var b=x.style.getPropertyValue("background");return b?f.inlineAll(b).then(function(p){x.style.setProperty("background",p,x.style.getPropertyPriority("background"))}).then(function(){return x}):Promise.resolve(x)}}}})()}(ae)),ae.exports}var _e=ke();const qe=Re(_e);var ce={exports:{}},be;function Fe(){return be||(be=1,function(e){var n=function(){var t=String.fromCharCode,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",h={};function S(a,c){if(!h[a]){h[a]={};for(var g=0;g<a.length;g++)h[a][a.charAt(g)]=g}return h[a][c]}var T={compressToBase64:function(a){if(a==null)return"";var c=T._compress(a,6,function(g){return f.charAt(g)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(a){return a==null?"":a==""?null:T._decompress(a.length,32,function(c){return S(f,a.charAt(c))})},compressToUTF16:function(a){return a==null?"":T._compress(a,15,function(c){return t(c+32)})+" "},decompressFromUTF16:function(a){return a==null?"":a==""?null:T._decompress(a.length,16384,function(c){return a.charCodeAt(c)-32})},compressToUint8Array:function(a){for(var c=T.compress(a),g=new Uint8Array(c.length*2),u=0,l=c.length;u<l;u++){var D=c.charCodeAt(u);g[u*2]=D>>>8,g[u*2+1]=D%256}return g},decompressFromUint8Array:function(a){if(a==null)return T.decompress(a);for(var c=new Array(a.length/2),g=0,u=c.length;g<u;g++)c[g]=a[g*2]*256+a[g*2+1];var l=[];return c.forEach(function(D){l.push(t(D))}),T.decompress(l.join(""))},compressToEncodedURIComponent:function(a){return a==null?"":T._compress(a,6,function(c){return d.charAt(c)})},decompressFromEncodedURIComponent:function(a){return a==null?"":a==""?null:(a=a.replace(/ /g,"+"),T._decompress(a.length,32,function(c){return S(d,a.charAt(c))}))},compress:function(a){return T._compress(a,16,function(c){return t(c)})},_compress:function(a,c,g){if(a==null)return"";var u,l,D={},O={},U="",W="",L="",C=2,I=3,E=2,A=[],i=0,o=0,r;for(r=0;r<a.length;r+=1)if(U=a.charAt(r),Object.prototype.hasOwnProperty.call(D,U)||(D[U]=I++,O[U]=!0),W=L+U,Object.prototype.hasOwnProperty.call(D,W))L=W;else{if(Object.prototype.hasOwnProperty.call(O,L)){if(L.charCodeAt(0)<256){for(u=0;u<E;u++)i=i<<1,o==c-1?(o=0,A.push(g(i)),i=0):o++;for(l=L.charCodeAt(0),u=0;u<8;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1}else{for(l=1,u=0;u<E;u++)i=i<<1|l,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=0;for(l=L.charCodeAt(0),u=0;u<16;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1}C--,C==0&&(C=Math.pow(2,E),E++),delete O[L]}else for(l=D[L],u=0;u<E;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1;C--,C==0&&(C=Math.pow(2,E),E++),D[W]=I++,L=String(U)}if(L!==""){if(Object.prototype.hasOwnProperty.call(O,L)){if(L.charCodeAt(0)<256){for(u=0;u<E;u++)i=i<<1,o==c-1?(o=0,A.push(g(i)),i=0):o++;for(l=L.charCodeAt(0),u=0;u<8;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1}else{for(l=1,u=0;u<E;u++)i=i<<1|l,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=0;for(l=L.charCodeAt(0),u=0;u<16;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1}C--,C==0&&(C=Math.pow(2,E),E++),delete O[L]}else for(l=D[L],u=0;u<E;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1;C--,C==0&&(C=Math.pow(2,E),E++)}for(l=2,u=0;u<E;u++)i=i<<1|l&1,o==c-1?(o=0,A.push(g(i)),i=0):o++,l=l>>1;for(;;)if(i=i<<1,o==c-1){A.push(g(i));break}else o++;return A.join("")},decompress:function(a){return a==null?"":a==""?null:T._decompress(a.length,32768,function(c){return a.charCodeAt(c)})},_decompress:function(a,c,g){var u=[],l=4,D=4,O=3,U="",W=[],L,C,I,E,A,i,o,r={val:g(0),position:c,index:1};for(L=0;L<3;L+=1)u[L]=L;for(I=0,A=Math.pow(2,2),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;switch(I){case 0:for(I=0,A=Math.pow(2,8),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;o=t(I);break;case 1:for(I=0,A=Math.pow(2,16),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;o=t(I);break;case 2:return""}for(u[3]=o,C=o,W.push(o);;){if(r.index>a)return"";for(I=0,A=Math.pow(2,O),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;switch(o=I){case 0:for(I=0,A=Math.pow(2,8),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;u[D++]=t(I),o=D-1,l--;break;case 1:for(I=0,A=Math.pow(2,16),i=1;i!=A;)E=r.val&r.position,r.position>>=1,r.position==0&&(r.position=c,r.val=g(r.index++)),I|=(E>0?1:0)*i,i<<=1;u[D++]=t(I),o=D-1,l--;break;case 2:return W.join("")}if(l==0&&(l=Math.pow(2,O),O++),u[o])U=u[o];else if(o===D)U=C+C.charAt(0);else return null;W.push(U),u[D++]=C+U.charAt(0),l--,C=U,l==0&&(l=Math.pow(2,O),O++)}}};return T}();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})}(ce)),ce.exports}var Ne=Fe();const We=document.querySelector("table"),He=document.querySelector(".save"),ze=document.querySelector(".new"),Ve=document.querySelector("#share");for(let e=0;e<5;e++){const n=We.insertRow();for(let t=0;t<5;t++){const f=n.insertCell();f.contentEditable=!0}}function Xe(e,n){let t;return(...f)=>{clearTimeout(t),t=setTimeout(()=>e(...f),n)}}const Z=De("bingo-db",1,{upgrade(e){e.createObjectStore("cards",{keyPath:"id",autoIncrement:!0})}});te();let _=null;async function ee(){const e=await Z,n=document.querySelector(".title span:nth-child(2)").innerText.trim(),t=Array.from(document.querySelectorAll("table td")).map(h=>h.innerText.trim()),f={title:n,cells:t};_&&(f.id=_),_=await e.put("cards",f),te()}const Pe=Xe(ee,500);document.querySelector(".title").addEventListener("input",Pe);document.querySelector("table").addEventListener("input",Pe);document.getElementById("cardList").addEventListener("change",async e=>{const n=Number(e.target.value);he(n),_=n});function $e(){document.querySelector(".title span:nth-child(2)").innerText="Новое бинго",document.querySelectorAll("table td").forEach(e=>e.innerText=""),_=null,ee()}async function he(e){const t=await(await Z).get("cards",e);if(!t)return;document.querySelector(".title span:nth-child(2)").innerText=t.title;const f=document.querySelectorAll("table td");t.cells.forEach((d,h)=>{f[h]&&(f[h].innerText=d)})}async function te(){const n=await(await Z).getAll("cards"),t=document.getElementById("cardList");t.innerHTML="";for(const f of n){const d=document.createElement("option");d.value=f.id;const h=(f.title||`Бинго #${f.id}`).trim(),S=h.length>26?h.substring(0,26)+"…":h;d.textContent=S,f.id===_&&(d.selected=!0),t.appendChild(d)}}document.getElementById("deleteBtn").addEventListener("click",async()=>{if(!_){alert("Нет выбранной карточки для удаления");return}const e=await Z;await e.delete("cards",_),alert("Карточка удалена"),_=null;const n=await e.getAll("cards");if(n.length>0){const t=n[0];he(t.id),_=t.id}else document.querySelector(".title span:nth-child(2)").innerText="Новое бинго",document.querySelectorAll("table td").forEach(t=>t.innerText=""),await ee();await te()});ze.addEventListener("click",()=>{document.querySelector(".title span:nth-child(2)").innerText="Новое бинго",document.querySelectorAll("table td").forEach(e=>e.innerText=""),_=null,ee()});He.addEventListener("click",()=>{const e=document.querySelector(".container");qe.toPng(e).then(n=>{const t=document.createElement("a");t.download="bingo.png",t.href=n,t.click()}).catch(n=>{console.error("Ошибка:",n)})});window.addEventListener("DOMContentLoaded",async()=>{const n=await(await Z).getAll("cards");if(n.length>0){const t=n[n.length-1];he(t.id),_=t.id}else $e();await te()});Ve.addEventListener("click",async()=>{const e={};document.querySelector(".title span:nth-child(2)");const t=await(await Z).get("cards",_);e.title=t.title,e.cells=t.cells,e.answers=[[!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1]];const f=JSON.stringify(e),h="http://localhost:5173/view.html?data="+Ne.compressToEncodedURIComponent(f);navigator.clipboard.writeText(h),alert("Ссылка скопирована в буфер обмена")});
